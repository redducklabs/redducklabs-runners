# Red Duck Labs GitHub Actions Runners - Environment Configuration
# Copy this file to .env and configure for your environment

# =============================================================================
# GitHub Configuration
# =============================================================================

# GitHub Personal Access Token with admin:org, repo, and workflow scopes
# Get from: https://github.com/settings/tokens
GITHUB_TOKEN=ghp_your_token_here

# GitHub organization or repository URL
GITHUB_ORG=redducklabs
GITHUB_URL=https://github.com/redducklabs

# =============================================================================
# Kubernetes Configuration
# =============================================================================

# Kubernetes cluster context (get with: kubectl config get-contexts)
CLUSTER_CONTEXT=do-sfo3-redducklabs-cluster

# Kubernetes namespace for runners
NAMESPACE=arc-runners

# Helm release name
RELEASE_NAME=redducklabs-runners

# =============================================================================
# Container Registry Configuration
# =============================================================================

# Registry URL (DigitalOcean Container Registry)
REGISTRY_URL=registry.digitalocean.com

# Registry namespace/organization
REGISTRY_NAMESPACE=redducklabs

# Full image path
RUNNER_IMAGE=registry.digitalocean.com/redducklabs/github-runner:latest

# DigitalOcean Registry Token (for pull secrets)
# Get from: https://cloud.digitalocean.com/account/api/tokens
DO_REGISTRY_TOKEN=your_do_token_here

# =============================================================================
# Runner Configuration
# =============================================================================

# Runner scale set name (used in workflows as: runs-on: redducklabs-runners)
RUNNER_SCALE_SET_NAME=redducklabs-runners

# Minimum number of runners (always-on)
MIN_RUNNERS=2

# Maximum number of runners (scale up to this limit)
MAX_RUNNERS=4

# Image tag for custom builds
IMAGE_TAG=latest

# =============================================================================
# Resource Configuration
# =============================================================================

# CPU limits per runner
CPU_LIMIT=2
CPU_REQUEST=500m

# Memory limits per runner
MEMORY_LIMIT=4Gi
MEMORY_REQUEST=1Gi

# Ephemeral storage limit
STORAGE_LIMIT=10Gi

# =============================================================================
# Development/Testing Configuration
# =============================================================================

# Force rebuild Docker images (ignore cache)
FORCE_REBUILD=false

# Enable debug logging
DEBUG=false

# Test mode (use smaller resource limits)
TEST_MODE=false

# =============================================================================
# Security Configuration
# =============================================================================

# Enable network policies (recommended for production)
ENABLE_NETWORK_POLICIES=true

# Enable Pod Security Standards
ENABLE_POD_SECURITY=true

# Security context settings
RUN_AS_NON_ROOT=true
READ_ONLY_ROOT_FILESYSTEM=false  # Required false for runner operation

# =============================================================================
# Monitoring Configuration
# =============================================================================

# Enable Prometheus metrics
ENABLE_METRICS=true

# Metrics port
METRICS_PORT=8080

# Enable health checks
ENABLE_HEALTH_CHECKS=true

# =============================================================================
# Backup Configuration
# =============================================================================

# Backup retention in days
BACKUP_RETENTION_DAYS=30

# Backup storage location
BACKUP_LOCATION=s3://your-backup-bucket/

# =============================================================================
# Notifications Configuration
# =============================================================================

# Slack webhook for alerts (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Email for alerts (optional)
ALERT_EMAIL=alerts@redducklabs.com

# =============================================================================
# Advanced Configuration
# =============================================================================

# Docker-in-Docker configuration
DIND_ENABLED=true
DIND_PRIVILEGED=false

# Custom CA certificates (if needed)
CUSTOM_CA_BUNDLE=

# Proxy configuration (if needed)
HTTP_PROXY=
HTTPS_PROXY=
NO_PROXY=localhost,127.0.0.1,.cluster.local

# =============================================================================
# Template Configuration (for .template.* files)
# =============================================================================

# These variables are used when copying from template files
# Replace YOUR_* placeholders with actual values

YOUR_ORG_OR_REPO=redducklabs
YOUR_RUNNER_NAME=redducklabs-runners
YOUR_REGISTRY=registry.digitalocean.com
YOUR_IMAGE=registry.digitalocean.com/redducklabs/github-runner:latest
YOUR_CLUSTER_CONTEXT=do-sfo3-redducklabs-cluster

# =============================================================================
# Usage Instructions
# =============================================================================

# 1. Copy this file: cp .env.example .env
# 2. Edit .env with your actual values
# 3. Source the environment: source .env
# 4. Never commit .env to git!

# Required for basic operation:
# - GITHUB_TOKEN
# - CLUSTER_CONTEXT
# - DO_REGISTRY_TOKEN (if using custom images)

# Optional but recommended:
# - All security settings
# - Monitoring settings
# - Resource limits tuned for your workload